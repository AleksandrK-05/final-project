print("=" * 50)
print("üí∞ –ë–û–¢ –î–õ–Ø –ö–£–†–°–û–í –í–ê–õ–Æ–¢")
print("=" * 50)
print()

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Python –≤–µ—Ä—Å–∏—é
import sys
print("1. –ü—Ä–æ–≤–µ—Ä—è—é –≤–µ—Ä—Å–∏—é Python...")
print(f"   –í–µ—Ä—Å–∏—è: {sys.version}")
if sys.version_info < (3, 8):
    print("   ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Python 3.8+")
else:
    print("   ‚úÖ –í–µ—Ä—Å–∏—è –ø–æ–¥—Ö–æ–¥–∏—Ç")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
print("\n2. –ü—Ä–æ–≤–µ—Ä—è—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏...")
try:
    import telegram
    import requests
    from dotenv import load_dotenv
    print("   ‚úÖ –í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")
except ImportError as e:
    print(f"   ‚ùå –û—à–∏–±–∫–∞: {e}")
    print("\n   –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:")
    print("   pip install -r requirements.txt")
    input("\n   –ù–∞–∂–º–∏ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")
    sys.exit(1)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω
print("\n3. –ü—Ä–æ–≤–µ—Ä—è—é —Ç–æ–∫–µ–Ω –±–æ—Ç–∞...")
from dotenv import load_dotenv
import os

load_dotenv()
TOKEN = os.getenv('BOT_TOKEN')

if TOKEN:
    # –°–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    masked_token = TOKEN[:10] + "..." + TOKEN[-5:] if len(TOKEN) > 15 else "***"
    print(f"   ‚úÖ –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω: {masked_token}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞
    if ":" in TOKEN and TOKEN.split(":")[0].isdigit():
        print("   ‚úÖ –§–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π")
    else:
        print("   ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: —á–∏—Å–ª–æ:–±—É–∫–≤—ã)")
else:
    print("   ‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!")
    print("\n   –°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å:")
    print("   BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å")
    input("\n   –ù–∞–∂–º–∏ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")
    sys.exit(1)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
print("\n4. –ü—Ä–æ–≤–µ—Ä—è—é –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...")
try:
    response = requests.get("https://api.telegram.org", timeout=5)
    print("   ‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç")
except:
    print("   ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º")
    print("   –ë–æ—Ç –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞")

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
print("\n" + "=" * 50)
print("üöÄ –ó–ê–ü–£–°–ö –ë–û–¢–ê")
print("=" * 50)
print()
print("–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:")
print("1. –û—Ç–∫—Ä–æ–π Telegram")
print("2. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞")
print("3. –ù–∞–ø–∏—à–∏ /start")
print()
print("–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞ –Ω–∞–∂–º–∏ Ctrl+C")
print("=" * 50)

# –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞
import time
print("\n–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã...")
for i in range(3, 0, -1):
    print(f"{i}...")
    time.sleep(1)

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
try:
    from src.bot_simple import main
    print("\n‚úÖ –ó–∞–ø—É—Å–∫–∞—é –±–æ—Ç–∞...")
    main()
except KeyboardInterrupt:
    print("\n\nüõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
except Exception as e:
    print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ: {e}")
    input("\n–ù–∞–∂–º–∏ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")